{
  "openapi": "3.0.0",
  "info": {
    "title": "Chat App API",
    "description": "API para la aplicación de chat en tiempo real",
    "version": "1.0.0",
    "contact": {
      "name": "Soporte API",
      "email": "tu-email@example.com"
    }
  },
  "servers": [
    {
      "url": "http://localhost:3000/api",
      "description": "Servidor de desarrollo"
    }
  ],
  "paths": {
    "/user/register": {
      "post": {
        "summary": "Registrar un nuevo usuario",
        "description": "Crea una nueva cuenta de usuario en el sistema",
        "tags": ["Usuarios"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["name", "email", "password"],
                "properties": {
                  "name": {
                    "type": "string",
                    "example": "Juan Pérez"
                  },
                  "email": {
                    "type": "string",
                    "format": "email",
                    "example": "juan@example.com"
                  },
                  "password": {
                    "type": "string",
                    "format": "password",
                    "example": "contraseña123"
                  },
                  "pic": {
                    "type": "string",
                    "format": "uri",
                    "example": "https://ejemplo.com/imagen.jpg"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Usuario registrado con éxito",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "statusCode": {
                      "type": "integer",
                      "example": 201
                    },
                    "message": {
                      "type": "string",
                      "example": "Usuario registrado con éxito"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "user": {
                          "type": "object",
                          "properties": {
                            "_id": {
                              "type": "string",
                              "example": "60d21b4967d0d8992e610c85"
                            },
                            "name": {
                              "type": "string",
                              "example": "Juan Pérez"
                            },
                            "email": {
                              "type": "string",
                              "example": "juan@example.com"
                            },
                            "pic": {
                              "type": "string",
                              "example": "https://ejemplo.com/imagen.jpg"
                            }
                          }
                        },
                        "accessToken": {
                          "type": "string",
                          "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                        },
                        "refreshToken": {
                          "type": "string",
                          "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error de validación",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "statusCode": {
                      "type": "integer",
                      "example": 400
                    },
                    "message": {
                      "type": "string",
                      "example": "Error de validación de datos"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Debe ser un correo electrónico válido"
                          },
                          "value": {
                            "type": "string",
                            "example": "correo-invalido"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "409": {
            "description": "Conflicto - Email ya registrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "statusCode": {
                      "type": "integer",
                      "example": 409
                    },
                    "message": {
                      "type": "string",
                      "example": "El correo electrónico ya está en uso"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/user/login": {
      "post": {
        "summary": "Iniciar sesión",
        "description": "Autentica a un usuario con su correo y contraseña",
        "tags": ["Usuarios"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["email", "password"],
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "example": "juan@example.com"
                  },
                  "password": {
                    "type": "string",
                    "format": "password",
                    "example": "contraseña123"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Inicio de sesión exitoso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "statusCode": {
                      "type": "integer",
                      "example": 200
                    },
                    "message": {
                      "type": "string",
                      "example": "Inicio de sesión exitoso"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "user": {
                          "type": "object",
                          "properties": {
                            "_id": {
                              "type": "string",
                              "example": "60d21b4967d0d8992e610c85"
                            },
                            "name": {
                              "type": "string",
                              "example": "Juan Pérez"
                            },
                            "email": {
                              "type": "string",
                              "example": "juan@example.com"
                            },
                            "pic": {
                              "type": "string",
                              "example": "https://ejemplo.com/imagen.jpg"
                            }
                          }
                        },
                        "accessToken": {
                          "type": "string",
                          "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                        },
                        "refreshToken": {
                          "type": "string",
                          "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Credenciales inválidas",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "statusCode": {
                      "type": "integer",
                      "example": 400
                    },
                    "message": {
                      "type": "string",
                      "example": "Correo electrónico o contraseña incorrectos"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/user": {
      "get": {
        "summary": "Buscar usuarios",
        "description": "Busca usuarios por nombre con paginación",
        "tags": ["Usuarios"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "search",
            "schema": {
              "type": "string"
            },
            "description": "Término de búsqueda para filtrar por nombre"
          },
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "default": 1
            },
            "description": "Número de página"
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "default": 10
            },
            "description": "Elementos por página"
          }
        ],
        "responses": {
          "200": {
            "description": "Usuarios encontrados",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "statusCode": {
                      "type": "integer",
                      "example": 200
                    },
                    "message": {
                      "type": "string",
                      "example": "Usuarios encontrados"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "_id": {
                            "type": "string",
                            "example": "60d21b4967d0d8992e610c85"
                          },
                          "name": {
                            "type": "string",
                            "example": "Juan Pérez"
                          },
                          "email": {
                            "type": "string",
                            "example": "juan@example.com"
                          },
                          "pic": {
                            "type": "string",
                            "example": "https://ejemplo.com/imagen.jpg"
                          }
                        }
                      }
                    },
                    "pagination": {
                      "type": "object",
                      "properties": {
                        "page": {
                          "type": "integer",
                          "example": 1
                        },
                        "limit": {
                          "type": "integer",
                          "example": 10
                        },
                        "total": {
                          "type": "integer",
                          "example": 25
                        },
                        "pages": {
                          "type": "integer",
                          "example": 3
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "No autenticado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "statusCode": {
                      "type": "integer",
                      "example": 401
                    },
                    "message": {
                      "type": "string",
                      "example": "Se requiere un token de autenticación"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },    "/user/refresh-token": {
      "post": {
        "summary": "Renovar token de acceso",
        "description": "Genera un nuevo token de acceso usando el token de refresco",
        "tags": ["Usuarios"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Token renovado con éxito",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "statusCode": {
                      "type": "integer",
                      "example": 200
                    },
                    "message": {
                      "type": "string",
                      "example": "Token de acceso renovado"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "accessToken": {
                          "type": "string",
                          "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Token de refresco inválido o expirado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "statusCode": {
                      "type": "integer",
                      "example": 401
                    },
                    "message": {
                      "type": "string",
                      "example": "Token inválido o expirado"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/chat/access": {
      "post": {
        "summary": "Acceder o iniciar un chat",
        "description": "Inicia un chat individual con otro usuario o accede a uno existente",
        "tags": ["Chats"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["userId"],
                "properties": {
                  "userId": {
                    "type": "string",
                    "example": "60d21b4967d0d8992e610c85"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Chat accedido con éxito",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "statusCode": {
                      "type": "integer",
                      "example": 200
                    },
                    "message": {
                      "type": "string",
                      "example": "Chat accedido con éxito"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "_id": {
                          "type": "string",
                          "example": "60d21b4967d0d8992e610c85"
                        },
                        "chatName": {
                          "type": "string",
                          "example": "Chat individual"
                        },
                        "isGroupChat": {
                          "type": "boolean",
                          "example": false
                        },
                        "users": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "_id": {
                                "type": "string",
                                "example": "60d21b4967d0d8992e610c85"
                              },
                              "name": {
                                "type": "string",
                                "example": "Juan Pérez"
                              },
                              "email": {
                                "type": "string",
                                "example": "juan@example.com"
                              },
                              "pic": {
                                "type": "string",
                                "example": "https://ejemplo.com/imagen.jpg"
                              }
                            }
                          }
                        },
                        "latestMessage": {
                          "type": "object",
                          "properties": {
                            "_id": {
                              "type": "string",
                              "example": "60d21b4967d0d8992e610c85"
                            },
                            "content": {
                              "type": "string",
                              "example": "Hola, ¿cómo estás?"
                            },
                            "sender": {
                              "type": "object",
                              "properties": {
                                "_id": {
                                  "type": "string",
                                  "example": "60d21b4967d0d8992e610c85"
                                },
                                "name": {
                                  "type": "string",
                                  "example": "Juan Pérez"
                                },
                                "pic": {
                                  "type": "string",
                                  "example": "https://ejemplo.com/imagen.jpg"
                                }
                              }
                            }
                          }
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-01T00:00:00.000Z"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-01T00:00:00.000Z"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la solicitud",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "statusCode": {
                      "type": "integer",
                      "example": 400
                    },
                    "message": {
                      "type": "string",
                      "example": "Id de usuario requerido"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "No autenticado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "statusCode": {
                      "type": "integer",
                      "example": 401
                    },
                    "message": {
                      "type": "string",
                      "example": "Se requiere un token de autenticación"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/chat/getChats": {
      "get": {
        "summary": "Obtener chats del usuario",
        "description": "Obtiene todos los chats en los que participa el usuario autenticado",
        "tags": ["Chats"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Chats obtenidos con éxito",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "statusCode": {
                      "type": "integer",
                      "example": 200
                    },
                    "message": {
                      "type": "string",
                      "example": "Chats obtenidos con éxito"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "_id": {
                            "type": "string",
                            "example": "60d21b4967d0d8992e610c85"
                          },
                          "chatName": {
                            "type": "string",
                            "example": "Chat grupal"
                          },
                          "isGroupChat": {
                            "type": "boolean",
                            "example": true
                          },
                          "users": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "_id": {
                                  "type": "string",
                                  "example": "60d21b4967d0d8992e610c85"
                                },
                                "name": {
                                  "type": "string",
                                  "example": "Juan Pérez"
                                },
                                "email": {
                                  "type": "string",
                                  "example": "juan@example.com"
                                },
                                "pic": {
                                  "type": "string",
                                  "example": "https://ejemplo.com/imagen.jpg"
                                }
                              }
                            }
                          },
                          "groupAdmin": {
                            "type": "object",
                            "properties": {
                              "_id": {
                                "type": "string",
                                "example": "60d21b4967d0d8992e610c85"
                              },
                              "name": {
                                "type": "string",
                                "example": "Juan Pérez"
                              },
                              "email": {
                                "type": "string",
                                "example": "juan@example.com"
                              }
                            }
                          },
                          "latestMessage": {
                            "type": "object",
                            "properties": {
                              "_id": {
                                "type": "string",
                                "example": "60d21b4967d0d8992e610c85"
                              },
                              "content": {
                                "type": "string",
                                "example": "Hola a todos"
                              },
                              "sender": {
                                "type": "object",
                                "properties": {
                                  "_id": {
                                    "type": "string",
                                    "example": "60d21b4967d0d8992e610c85"
                                  },
                                  "name": {
                                    "type": "string",
                                    "example": "Juan Pérez"
                                  },
                                  "pic": {
                                    "type": "string",
                                    "example": "https://ejemplo.com/imagen.jpg"
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "No autenticado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "statusCode": {
                      "type": "integer",
                      "example": 401
                    },
                    "message": {
                      "type": "string",
                      "example": "Se requiere un token de autenticación"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/chat/createGroup": {
      "post": {
        "summary": "Crear un chat grupal",
        "description": "Crea un nuevo chat grupal con los usuarios especificados",
        "tags": ["Chats"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["name", "users"],
                "properties": {
                  "name": {
                    "type": "string",
                    "example": "Grupo de amigos"
                  },
                  "users": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "example": "60d21b4967d0d8992e610c85"
                    },
                    "minItems": 2
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Grupo creado con éxito",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "statusCode": {
                      "type": "integer",
                      "example": 200
                    },
                    "message": {
                      "type": "string",
                      "example": "Grupo creado con éxito"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "_id": {
                          "type": "string",
                          "example": "60d21b4967d0d8992e610c85"
                        },
                        "chatName": {
                          "type": "string",
                          "example": "Grupo de amigos"
                        },
                        "isGroupChat": {
                          "type": "boolean",
                          "example": true
                        },
                        "users": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "_id": {
                                "type": "string",
                                "example": "60d21b4967d0d8992e610c85"
                              },
                              "name": {
                                "type": "string",
                                "example": "Juan Pérez"
                              },
                              "email": {
                                "type": "string",
                                "example": "juan@example.com"
                              }
                            }
                          }
                        },
                        "groupAdmin": {
                          "type": "object",
                          "properties": {
                            "_id": {
                              "type": "string",
                              "example": "60d21b4967d0d8992e610c85"
                            },
                            "name": {
                              "type": "string",
                              "example": "Juan Pérez"
                            },
                            "email": {
                              "type": "string",
                              "example": "juan@example.com"
                            }
                          }
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-01T00:00:00.000Z"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-01T00:00:00.000Z"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la solicitud",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "statusCode": {
                      "type": "integer",
                      "example": 400
                    },
                    "message": {
                      "type": "string",
                      "example": "Se requieren más de 2 usuarios para formar un chat grupal"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "No autenticado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "statusCode": {
                      "type": "integer",
                      "example": 401
                    },
                    "message": {
                      "type": "string",
                      "example": "Se requiere un token de autenticación"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/chat/renameGroup": {
      "put": {
        "summary": "Renombrar un chat grupal",
        "description": "Cambia el nombre de un chat grupal existente",
        "tags": ["Chats"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["chatId", "chatName"],
                "properties": {
                  "chatId": {
                    "type": "string",
                    "example": "60d21b4967d0d8992e610c85"
                  },
                  "chatName": {
                    "type": "string",
                    "example": "Nuevo nombre del grupo"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Grupo renombrado con éxito",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "statusCode": {
                      "type": "integer",
                      "example": 200
                    },
                    "message": {
                      "type": "string",
                      "example": "Grupo renombrado con éxito"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "_id": {
                          "type": "string",
                          "example": "60d21b4967d0d8992e610c85"
                        },
                        "chatName": {
                          "type": "string",
                          "example": "Nuevo nombre del grupo"
                        },
                        "isGroupChat": {
                          "type": "boolean",
                          "example": true
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la solicitud",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "statusCode": {
                      "type": "integer",
                      "example": 400
                    },
                    "message": {
                      "type": "string",
                      "example": "Se requiere un ID de chat y un nuevo nombre"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "No autenticado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "statusCode": {
                      "type": "integer",
                      "example": 401
                    },
                    "message": {
                      "type": "string",
                      "example": "Se requiere un token de autenticación"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "No autorizado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "statusCode": {
                      "type": "integer",
                      "example": 403
                    },
                    "message": {
                      "type": "string",
                      "example": "Solo el administrador puede renombrar el grupo"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/chat/addUser": {
      "put": {
        "summary": "Añadir usuario a un grupo",
        "description": "Añade un usuario a un chat grupal existente",
        "tags": ["Chats"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["chatId", "userId"],
                "properties": {
                  "chatId": {
                    "type": "string",
                    "example": "60d21b4967d0d8992e610c85"
                  },
                  "userId": {
                    "type": "string",
                    "example": "60d21b4967d0d8992e610c85"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Usuario añadido al grupo con éxito",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "statusCode": {
                      "type": "integer",
                      "example": 200
                    },
                    "message": {
                      "type": "string",
                      "example": "Usuario añadido al grupo con éxito"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "_id": {
                          "type": "string",
                          "example": "60d21b4967d0d8992e610c85"
                        },
                        "chatName": {
                          "type": "string",
                          "example": "Grupo de amigos"
                        },
                        "isGroupChat": {
                          "type": "boolean",
                          "example": true
                        },
                        "users": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "_id": {
                                "type": "string",
                                "example": "60d21b4967d0d8992e610c85"
                              },
                              "name": {
                                "type": "string",
                                "example": "Juan Pérez"
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la solicitud",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "statusCode": {
                      "type": "integer",
                      "example": 400
                    },
                    "message": {
                      "type": "string",
                      "example": "Se requiere un ID de chat y un ID de usuario"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "No autenticado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "statusCode": {
                      "type": "integer",
                      "example": 401
                    },
                    "message": {
                      "type": "string",
                      "example": "Se requiere un token de autenticación"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "No autorizado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "statusCode": {
                      "type": "integer",
                      "example": 403
                    },
                    "message": {
                      "type": "string",
                      "example": "Solo el administrador puede añadir usuarios al grupo"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/chat/removeUser": {
      "put": {
        "summary": "Eliminar usuario de un grupo",
        "description": "Elimina un usuario de un chat grupal existente",
        "tags": ["Chats"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["chatId", "userId"],
                "properties": {
                  "chatId": {
                    "type": "string",
                    "example": "60d21b4967d0d8992e610c85"
                  },
                  "userId": {
                    "type": "string",
                    "example": "60d21b4967d0d8992e610c85"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Usuario eliminado del grupo con éxito",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "statusCode": {
                      "type": "integer",
                      "example": 200
                    },
                    "message": {
                      "type": "string",
                      "example": "Usuario eliminado del grupo con éxito"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "_id": {
                          "type": "string",
                          "example": "60d21b4967d0d8992e610c85"
                        },
                        "chatName": {
                          "type": "string",
                          "example": "Grupo de amigos"
                        },
                        "isGroupChat": {
                          "type": "boolean",
                          "example": true
                        },
                        "users": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "_id": {
                                "type": "string",
                                "example": "60d21b4967d0d8992e610c85"
                              },
                              "name": {
                                "type": "string",
                                "example": "Juan Pérez"
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la solicitud",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "statusCode": {
                      "type": "integer",
                      "example": 400
                    },
                    "message": {
                      "type": "string",
                      "example": "Se requiere un ID de chat y un ID de usuario"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "No autenticado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "statusCode": {
                      "type": "integer",
                      "example": 401
                    },
                    "message": {
                      "type": "string",
                      "example": "Se requiere un token de autenticación"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "No autorizado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "statusCode": {
                      "type": "integer",
                      "example": 403
                    },
                    "message": {
                      "type": "string",
                      "example": "Solo el administrador puede eliminar usuarios del grupo"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/chat/leaveGroup/{groupId}": {
      "put": {
        "summary": "Abandonar un grupo",
        "description": "Permite al usuario autenticado abandonar un chat grupal",
        "tags": ["Chats"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "groupId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID del chat grupal que se desea abandonar"
          }
        ],
        "responses": {
          "200": {
            "description": "Grupo abandonado con éxito",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "statusCode": {
                      "type": "integer",
                      "example": 200
                    },
                    "message": {
                      "type": "string",
                      "example": "Has abandonado el grupo con éxito"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "chatId": {
                          "type": "string",
                          "example": "60d21b4967d0d8992e610c85"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la solicitud",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "statusCode": {
                      "type": "integer",
                      "example": 400
                    },
                    "message": {
                      "type": "string",
                      "example": "Se requiere un ID de grupo válido"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "No autenticado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "statusCode": {
                      "type": "integer",
                      "example": 401
                    },
                    "message": {
                      "type": "string",
                      "example": "Se requiere un token de autenticación"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Grupo no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "statusCode": {
                      "type": "integer",
                      "example": 404
                    },
                    "message": {
                      "type": "string",
                      "example": "Grupo no encontrado"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/message/send": {
      "post": {
        "summary": "Enviar un mensaje",
        "description": "Envía un mensaje a un chat individual o grupal",
        "tags": ["Mensajes"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["content", "chatId"],
                "properties": {
                  "content": {
                    "type": "string",
                    "example": "Hola, ¿cómo estás?"
                  },
                  "chatId": {
                    "type": "string",
                    "example": "60d21b4967d0d8992e610c85"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Mensaje enviado con éxito",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "statusCode": {
                      "type": "integer",
                      "example": 200
                    },
                    "message": {
                      "type": "string",
                      "example": "Mensaje enviado con éxito"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "_id": {
                          "type": "string",
                          "example": "60d21b4967d0d8992e610c85"
                        },
                        "sender": {
                          "type": "object",
                          "properties": {
                            "_id": {
                              "type": "string",
                              "example": "60d21b4967d0d8992e610c85"
                            },
                            "name": {
                              "type": "string",
                              "example": "Juan Pérez"
                            },
                            "pic": {
                              "type": "string",
                              "example": "https://ejemplo.com/imagen.jpg"
                            }
                          }
                        },
                        "content": {
                          "type": "string",
                          "example": "Hola, ¿cómo estás?"
                        },
                        "chat": {
                          "type": "object",
                          "properties": {
                            "_id": {
                              "type": "string",
                              "example": "60d21b4967d0d8992e610c85"
                            },
                            "chatName": {
                              "type": "string",
                              "example": "Chat individual"
                            },
                            "isGroupChat": {
                              "type": "boolean",
                              "example": false
                            },
                            "users": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "_id": {
                                    "type": "string",
                                    "example": "60d21b4967d0d8992e610c85"
                                  },
                                  "name": {
                                    "type": "string",
                                    "example": "Juan Pérez"
                                  },
                                  "email": {
                                    "type": "string",
                                    "example": "juan@example.com"
                                  }
                                }
                              }
                            }
                          }
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-01T00:00:00.000Z"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-01T00:00:00.000Z"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la solicitud",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "statusCode": {
                      "type": "integer",
                      "example": 400
                    },
                    "message": {
                      "type": "string",
                      "example": "Se requiere contenido y un ID de chat"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "No autenticado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "statusCode": {
                      "type": "integer",
                      "example": 401
                    },
                    "message": {
                      "type": "string",
                      "example": "Se requiere un token de autenticación"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Chat no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "statusCode": {
                      "type": "integer",
                      "example": 404
                    },
                    "message": {
                      "type": "string",
                      "example": "Chat no encontrado"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/message/getMessages/{chatId}": {
      "get": {
        "summary": "Obtener mensajes de un chat",
        "description": "Obtiene todos los mensajes de un chat específico",
        "tags": ["Mensajes"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "chatId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID del chat del que se quieren obtener los mensajes"
          }
        ],
        "responses": {
          "200": {
            "description": "Mensajes obtenidos con éxito",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "statusCode": {
                      "type": "integer",
                      "example": 200
                    },
                    "message": {
                      "type": "string",
                      "example": "Mensajes obtenidos con éxito"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "_id": {
                            "type": "string",
                            "example": "60d21b4967d0d8992e610c85"
                          },
                          "sender": {
                            "type": "object",
                            "properties": {
                              "_id": {
                                "type": "string",
                                "example": "60d21b4967d0d8992e610c85"
                              },
                              "name": {
                                "type": "string",
                                "example": "Juan Pérez"
                              },
                              "pic": {
                                "type": "string",
                                "example": "https://ejemplo.com/imagen.jpg"
                              }
                            }
                          },
                          "content": {
                            "type": "string",
                            "example": "Hola, ¿cómo estás?"
                          },
                          "chat": {
                            "type": "string",
                            "example": "60d21b4967d0d8992e610c85"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time",
                            "example": "2023-01-01T00:00:00.000Z"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date-time",
                            "example": "2023-01-01T00:00:00.000Z"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la solicitud",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "statusCode": {
                      "type": "integer",
                      "example": 400
                    },
                    "message": {
                      "type": "string",
                      "example": "Se requiere un ID de chat válido"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "No autenticado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "statusCode": {
                      "type": "integer",
                      "example": 401
                    },
                    "message": {
                      "type": "string",
                      "example": "Se requiere un token de autenticación"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Chat no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "statusCode": {
                      "type": "integer",
                      "example": 404
                    },
                    "message": {
                      "type": "string",
                      "example": "Chat no encontrado"
                    }
                  }
                }
              }
            }
          }
        }
      }
    }},
  "components": {
    "securitySchemes": {
      "BearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    }
  }
}
